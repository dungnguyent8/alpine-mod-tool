var content=(function(){"use strict";function w(t){return t}const s=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,l={CONTENT:"content"},d={LOAD_DETECTOR:"load-detector",ALPINE_DETECTED:"alpine-detected"},E={matches:["https://*/*","http://*/*"],runAt:"document_start",world:"ISOLATED",main(){s.runtime.sendMessage({source:l.CONTENT,type:d.LOAD_DETECTOR,payload:{}}),window.addEventListener("message",t=>{t.data.source!==l.CONTENT||t.data.type!==d.ALPINE_DETECTED||t.data.payload.alpineDetected&&s.runtime.sendMessage({source:l.CONTENT,type:d.ALPINE_DETECTED,payload:t.data.payload})})}};function o(t,...e){}const g={debug:(...t)=>o(console.debug,...t),log:(...t)=>o(console.log,...t),warn:(...t)=>o(console.warn,...t),error:(...t)=>o(console.error,...t)};class u extends Event{constructor(e,n){super(u.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=n}static EVENT_NAME=h("wxt:locationchange")}function h(t){return`${s?.runtime?.id}:content:${t}`}function p(t){let e,n;return{run(){e==null&&(n=new URL(location.href),e=t.setInterval(()=>{let r=new URL(location.href);r.href!==n.href&&(window.dispatchEvent(new u(r,n)),n=r)},1e3))}}}class a{constructor(e,n){this.contentScriptName=e,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=h("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=p(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return s.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,n){const r=setInterval(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(e,n){const r=setTimeout(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(e){const n=requestAnimationFrame((...r)=>{this.isValid&&e(...r)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(e,n){const r=requestIdleCallback((...i)=>{this.signal.aborted||e(...i)},n);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(e,n,r,i){n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),e.addEventListener?.(n.startsWith("wxt:")?h(n):n,r,{...i,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),g.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:a.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){const n=e.data?.type===a.SCRIPT_STARTED_MESSAGE_TYPE,r=e.data?.contentScriptName===this.contentScriptName,i=!this.receivedMessageIds.has(e.data?.messageId);return n&&r&&i}listenForNewerScripts(e){let n=!0;const r=i=>{if(this.verifyScriptStartedEvent(i)){this.receivedMessageIds.add(i.data.messageId);const m=n;if(n=!1,m&&e?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}}function v(){}function c(t,...e){}const T={debug:(...t)=>c(console.debug,...t),log:(...t)=>c(console.log,...t),warn:(...t)=>c(console.warn,...t),error:(...t)=>c(console.error,...t)};return(async()=>{try{const{main:t,...e}=E,n=new a("content",e);return await t(n)}catch(t){throw T.error('The content script "content" crashed on startup!',t),t}})()})();
content;